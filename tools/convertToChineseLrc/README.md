# Convert to Chinese LRC 工具

一个用于将双语 LRC 字幕文件转换为仅包含中文字幕的 LRC 文件的 Node.js 脚本。该脚本会提取双语 LRC 文件中对应的中文字幕，并生成新的 LRC 文件，方便在支持 LRC 字幕的播放器中使用。

## 特性

- **提取中文字幕**：从双语 LRC 文件中提取中文字幕，生成仅含中文的 LRC 文件。
- **自动处理时间戳**：保留原始时间戳信息，确保字幕与音频完美同步。
- **简单易用**：无需复杂的配置，直接在命令行中运行即可。
- **错误处理**：提供友好的错误提示，方便排查问题。

## 前提条件

- **Node.js**：确保已安装 Node.js（建议版本 10 或更高）。

## 使用方法

在命令行中使用 Node.js 运行脚本：

```bash
node convertToChineseLrc.js <input.lrc> [output.lrc]
```

- `<input.lrc>`：**（必需）** 要转换的双语 LRC 文件的路径。
- `[output.lrc]`：**（可选）** 要保存转换后的 LRC 文件的路径。如果未指定，输出文件将保存在与输入文件相同的目录下，文件名加上 `_cn.lrc` 后缀。

### 示例

#### 1. 将双语 LRC 文件转换为仅含中文字幕的 LRC 文件（默认输出路径）

```bash
node convertToChineseLrc.js subtitles.lrc
```

- **输入**：`subtitles.lrc`
- **输出**：`subtitles_cn.lrc`（保存在相同目录下）

#### 2. 指定自定义输出文件路径

```bash
node convertToChineseLrc.js path/to/input.lrc path/to/output.lrc
```

- **输入**：`path/to/input.lrc`
- **输出**：`path/to/output.lrc`

## 注意事项

- **LRC 文件格式**：脚本假设 LRC 文件的格式为每个字幕条目由两行组成：
  - **第一行**：原始语言（例如日文）和时间戳。
  - **第二行**：具有相同时间戳的中文翻译。

  示例：

  ```plaintext
  [00:00.00]こんにちは
  [00:00.00]你好
  [00:05.00]お元気ですか？
  [00:05.00]你好吗？
  ```

- **编码**：请确保您的 LRC 文件使用 **UTF-8 编码**，以正确处理中文字符。

- **时间戳格式**：时间戳必须为 `[mm:ss.xx]` 的格式，其中：
  - `mm`：两位分钟数。
  - `ss`：两位秒数。
  - `xx`：两位毫秒数。

- **文件命名**：如果未指定输出文件路径，默认输出文件名为输入文件名加 `_cn.lrc`，保存在相同的目录下。

## 错误处理

- **缺少输入文件**：如果未提供输入文件路径，脚本将提示错误并退出。

- **文件读取错误**：如果无法读取指定的 LRC 文件，脚本将输出错误信息，可能的原因包括文件不存在或权限不足。

- **文件保存错误**：如果无法保存转换后的 LRC 文件，脚本将输出错误信息，可能的原因包括目录不存在或权限不足。

## 示例 LRC 与转换后的 LRC

**示例双语 LRC 文件（subtitles.lrc）：**

```plaintext
[00:00.00]こんにちは
[00:00.00]你好
[00:05.00]お元気ですか？
[00:05.00]你好吗？
```

**转换后的仅含中文字幕的 LRC 文件（subtitles_cn.lrc）：**

```plaintext
[00:00.00]你好
[00:05.00]你好吗？
```

## 常见问题

### Q1: 脚本支持含有多种语言的 LRC 文件吗？

目前脚本假设每个字幕条目由两行组成，第一行为外语，第二行为中文，且两行的时间戳相同。如果您的 LRC 文件格式不同，可能需要修改脚本以适应您的需求。

### Q2: 脚本如何判断一行是否包含中文？

脚本使用正则表达式 `/[\u4e00-\u9fa5]/` 检测字符串中是否包含中文字符。

### Q3: 转换后的 LRC 文件在播放器中无法正常显示，怎么办？

请确保您的 LRC 文件和转换后的 LRC 文件使用 **UTF-8 编码**。如果播放器不支持 UTF-8，可尝试转换为其他编码格式，如 ANSI 或 GBK。
